on: [push]
name: secret
jobs:
  run:
    runs-on: ubuntu-18.04
    steps:
    - name: Install databricks-cli
      run: pip install --upgrade databricks-cli
    - uses: actions/checkout@v1
    - name: Dump secret to file
      shell: bash
      env:
        DATABRICKS_SECRET: ${{ secrets.SuperSecret }}
      run: echo "$DATABRICKS_SECRET" > secret.txt
    - name: Configure Databricks
      run: databricks configure --token-file secret.txt --host "https://dbc-cf9bd6ca-db96.cloud.databricks.com"
    - name: List files in DBFS
      run: dbfs ls
